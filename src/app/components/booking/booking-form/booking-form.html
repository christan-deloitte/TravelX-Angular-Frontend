<!-- LEFT: Booking Form -->
<div>
  <div class="form-container">
    <h2 style="margin-bottom: 18px">Traveler & Booking Details</h2>

    <form [formGroup]="bookingForm" (ngSubmit)="onSubmit()">
      <!-- Name -->
      <div>
        <div class="form-group">
          <label for="name">Full Name *</label>
          <input id="name" name="name" formControlName="name" type="text" placeholder="Your full name" required />
          <!-- <span class="error-message" id="err-name"></span> -->
        </div>
        <div class="error-message" id="err-name"
          *ngIf="bookingForm.get('name')?.invalid && bookingForm.get('name')?.touched">
          <small *ngIf="bookingForm.get('name')?.errors?.['required']">Name is required</small>
        </div>
      </div>
      <!-- EMAIL -->

        <div class="form-row">
          <div class="form-group">
            <label for="email">Email *</label>
            <input id="email" name="email" formControlName="email" type="email" placeholder="you@example.com"
              required />
            <!-- <span class="error-message" id="err-email"></span> -->
             <div class="error-message" id="err-email"
            *ngIf="bookingForm.get('email')?.invalid && bookingForm.get('email')?.touched">
            <small *ngIf="bookingForm.get('email')?.errors?.['required']">Email is required</small>
            <small *ngIf="bookingForm.get('email')?.errors?.['email']">Invalid email format</small>
          </div>
          </div>



      <!-- Phone -->
      <div class="form-group">
        <label for="phone">Phone *</label>
        <input id="phone" name="phone" formControlName="phone" type="tel" placeholder="XXXXXXXXXX" required />

        <!-- Error Messages -->
        <div class="error-message" *ngIf="bookingForm.get('phone')?.touched && bookingForm.get('phone')?.invalid">
          <span *ngIf="bookingForm.get('phone')?.hasError('required')">
            Phone number is required
          </span>
          <span *ngIf="bookingForm.get('phone')?.hasError('pattern')">
            Enter a valid phone number
          </span>
        </div>
      </div>
      </div>




      <!-- Travel details -->
       <!-- Destination -->
      <div class="form-group">
        <label for="destination">Destination *</label>
        <select id="destination" formControlName="destination" class="form-control">
          <option value="" disabled>Select a destination</option>
          <option *ngFor="let d of DESTINATIONS" [value]="d.id">
            {{ d.title }} ({{ d.location }})
          </option>
        </select>

        <!-- Error Message -->
        <div class="error-message" id="err-destination"
          *ngIf="bookingForm.get('destination')?.touched && bookingForm.get('destination')?.hasError('required')">
          Destination is required
        </div>
      </div>
<!-- Package -->
      <div class="form-group">
        <label for="packageSelect">Package *</label>
        <select id="packageSelect" name="packageSelect" formControlName="packageSelect" required>
          <option value="" disabled>Select a package</option>
          <option *ngFor="let p of PACKAGES" [value]="p.id">
            {{ p.title }} â€” {{ p.nights }} ({{ p.location }})
          </option>
        </select>

        <!-- Error Message -->
        <div class="error-message" id="err-package"
          *ngIf="bookingForm.get('packageSelect')?.touched && bookingForm.get('packageSelect')?.hasError('required')">
          Package selection is required
        </div>
      </div>
        <div class="form-row">
          <!-- Start Date -->
          <div class="form-group">
            <label for="startDate">Start Date *</label>
            <input id="startDate" name="startDate" type="date" formControlName="startDate" required />

            <!-- Error Message -->
            <div class="error-message" id="err-startDate"
              *ngIf="bookingForm.get('startDate')?.touched && bookingForm.get('startDate')?.hasError('required')">
              Start date is required
            </div>
          </div>

          <!-- End Date -->
          <div class="form-group">
            <label for="endDate">End Date *</label>
            <input id="endDate" name="endDate" type="date" formControlName="endDate" required />

            <!-- Error Message -->
            <div class="error-message" id="err-endDate"
              *ngIf="bookingForm.get('endDate')?.touched && bookingForm.get('endDate')?.hasError('required')">
              End date is required
            </div>
          </div>
        </div>

  <div class="form-group">
  <label>Number of People *</label>
  <div style="display: flex; gap: 10px; align-items: center">
    <button type="button" class="qty-btn" (click)="decrementPeople()">-</button>

    <input
      type="number"
      id="numberOfPeople"
      formControlName="numberOfPeople"
      min="1"
      style="width: 80px; text-align: center"
    />

    <button type="button" class="qty-btn" (click)="incrementPeople()">+</button>
  </div>

  <span
    class="error-message"
    *ngIf="bookingForm.get('numberOfPeople')?.touched && bookingForm.get('numberOfPeople')?.hasError('required')"
  >
    Number of people is required
  </span>
  <span
    class="error-message"
    *ngIf="bookingForm.get('numberOfPeople')?.hasError('min')"
  >
    At least 1 person required
  </span>
</div>

        <!-- Accommodation -->
        <div style="margin-top: 12px; font-weight: 600; color: var(--dark); margin-bottom: 8px">
          Accommodation Preferences
        </div>
        <div class="form-row">
          <div class="form-group">
            <label for="roomType">Room Type</label>
            <select id="roomType" formControlName="roomType">
              <option>Standard</option>
              <option>Deluxe</option>
              <option>Suite</option>
            </select>
          </div>
          <div class="form-group">
            <label for="mealPlan">Meal Plan</label>
            <select id="mealPlan" formControlName="mealPlan">
              <option>Room only</option>
              <option>Breakfast</option>
              <option>Half board (breakfast + dinner)</option>
              <option>Full board (all meals)</option>
            </select>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="bedType">Bed Type</label>
            <select id="bedType" formControlName="bedType">
              <option>Double</option>
              <option>Twin</option>
              <option>Single</option>
            </select>
          </div>

          <div class="form-group">
            <label for="rooms">Rooms</label>
            <input id="rooms" formControlName="rooms" type="number" value="1" min="1" />
          </div>
        </div>

        <!-- Transport & Arrival -->
        <div style="margin-top: 12px; font-weight: 600; color: var(--dark); margin-bottom: 8px">
          Transport & Arrival
        </div>
        <div class="form-row">
          <div class="form-group">
            <label for="transportMode">Transport Mode</label>
            <select id="transportMode" formControlName="transportMode">
              <option>Flight</option>
              <option>Train</option>
              <option>Bus</option>
              <option>Self drive</option>
            </select>
          </div>
          <div class="form-group">
            <label for="flightNumber">Flight / Train No. (optional)</label>
            <input id="flightNumber" formControlName="flightNumber" type="text" placeholder="AI-123 / 12345" />
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="arrivalTime">Arrival Time (optional)</label>
            <input id="arrivalTime" formControlName="arrivalTime" type="time" />
          </div>
          <div class="form-group">
            <label for="departureTime">Departure Time (optional)</label>
            <input id="departureTime" formControlName="departureTime" type="time" />
          </div>
        </div>

        <!-- Extras and special requests -->
        <div style="margin-top: 12px; font-weight: 600; color: var(--dark); margin-bottom: 8px">
          Extras & Requests
        </div>
        <div style="display: flex; flex-wrap: wrap; gap: 12px; margin-bottom: 12px">
          <label><input type="checkbox" id="airportTransfer" /> Airport transfer</label>
          <label><input type="checkbox" id="travelInsurance" /> Travel insurance</label>
          <label><input type="checkbox" id="privateGuide" /> Private guide</label>
          <label><input type="checkbox" id="wheelchair" /> Special assistance</label>
        </div>

        <div class="form-group">
          <label for="specialRequests">Special Requests (max 500 chars)</label>
          <textarea id="specialRequests" maxlength="500" rows="4"
            placeholder="Dietary requests, mobility requirements, celebration notes..."></textarea>
          <div class="char-count" id="specialRequestsCount">0 / 500</div>
        </div>

        <div style="display: flex; gap: 12px; margin-top: 18px; align-items: center">
          <button type="submit" class="submit-btn" id="booking-form-submit">Confirm Booking</button>
          <button type="button" (click)="onReset()" id="saveDraftBtn" class="submit-btn"
            style="background: #fff; color: var(--primary); border: 1px solid #e2e8f0">
            Reset
          </button>
        </div>
        <!-- Success / Error Message -->
<div *ngIf="formMessage"
     [ngClass]="{'success-message': bookingForm.valid, 'error-message': !bookingForm.valid}"
     style="margin-top: 14px; font-weight: 600;">
  {{ formMessage }}
</div>

        </form>

  </div>
</div>
